\documentclass[conference]{IEEEtran}
\IEEEoverridecommandlockouts
\usepackage[dvipsnames]{xcolor}
\usepackage{enumitem}
\usepackage{balance}
\usepackage{pifont}
\usepackage{amsmath}
\usepackage{array}
\usepackage{listings}
\usepackage{microtype}
\usepackage{url}
\urlstyle{same}
% Load hyperref last to avoid clashes
\usepackage[colorlinks=true,linkcolor=MidnightBlue,citecolor=MidnightBlue,urlcolor=BrickRed]{hyperref}

\lstset{
  basicstyle=\ttfamily\footnotesize,
  numbers=left,
  numberstyle=\tiny,
  frame=single,
  showstringspaces=false,
  breaklines=true,
  keywordstyle=\color{blue},
  commentstyle=\color{gray},
  stringstyle=\color{orange}
}

\newcommand{\cmark}{\ding{51}}
\newcommand{\xmark}{\ding{55}}

\title{\textmu Touch Artifact Guide}

\author{
\IEEEauthorblockN{
Siyuan~Wang\IEEEauthorrefmark{1},
Ke~Li\IEEEauthorrefmark{2},
Jingyuan~Huang\IEEEauthorrefmark{1},
Jike~Wang\IEEEauthorrefmark{1},
Cheng~Zhang\IEEEauthorrefmark{2},
Alanson~Sample\IEEEauthorrefmark{3},
Dongyao~Chen\IEEEauthorrefmark{1}}
\IEEEauthorblockA{\IEEEauthorrefmark{1}Shanghai Jiao Tong University, China}
\IEEEauthorblockA{\IEEEauthorrefmark{2}Cornell University, USA}
\IEEEauthorblockA{\IEEEauthorrefmark{3}University of Michigan, USA}
}

\begin{document}
\hypersetup{
  pdftitle={\textmu Touch Artifact Guide},
  pdfauthor={Siyuan Wang, Ke Li, Jingyuan Huang, Jike Wang, Cheng Zhang, Alanson Sample, Dongyao Chen}
}
\maketitle
\sloppy

\section*{Quick Links}
\begin{center}
\begin{tabular}{@{}p{0.92in}>{\raggedright\arraybackslash}p{2.35in}@{}}
Code repo & \href{https://github.com/Wangmerlyn/muTouch}{github.com/Wangmerlyn/muTouch} \\
MagX base & \href{https://github.com/dychen24/magx}{github.com/dychen24/magx} \\
Models & Tag \texttt{backup/3\_dim-models-20260121} (GitHub Releases $\to$ Assets) \\
PCB sources & \texttt{pcb/} (muTouch Altium project; legacy \texttt{Magway.*} filenames) \\
\end{tabular}
\end{center}

\section{Scope}
This guide describes the artifact supporting \textmu Touch: hardware (muTouch PCB + magnets) and software (BLE data collection, semi-supervised classifier). It targets reviewers who want to install, run, and validate the pipeline.

\section{Bill of Materials \& Requirements}
\subsection{Hardware (minimal)}
\begin{itemize}[leftmargin=*]
  \item muTouch PCB (Altium project in \texttt{pcb/}; assembled board; filenames use legacy \texttt{Magway.*}). PCB design by Xiaomeng Chen.
  \item 1\textendash2 passive N52 grade magnets (6--8\,mm recommended).
  \item Host laptop: Ubuntu 20.04+ or macOS 12+, 4-core CPU, $\geq$8\,GB RAM, BLE 4.0+ adapter.
  \item Optional: BLE USB dongle (if desktop lacks BLE).
\end{itemize}
\subsection{Software}
\begin{itemize}[leftmargin=*]
  \item Python 3.10; Conda recommended.
  \item Git with submodules; CMake/Make (only if rebuilding C++ solver).
  \item Dependencies from \texttt{pip install -e .[dev]}.
  \item Latex/PDF tools not required for runtime; only for this guide.
\end{itemize}

\section{Obtaining the Artifact}
\begin{enumerate}[leftmargin=1.2em]
  \item Clone the repository (now public):\\
  \begin{lstlisting}[language=bash,numbers=none]
git clone --recurse-submodules git@github.com:Wangmerlyn/muTouch.git
# HTTPS fallback:
# https://github.com/Wangmerlyn/muTouch.git
  \end{lstlisting}
\item Activate env:\\
  \begin{lstlisting}[language=bash,numbers=none]
conda create -n muTouch python=3.10
conda activate muTouch
  \end{lstlisting}
\item Install deps:\\
  \begin{lstlisting}[language=bash,numbers=none]
pip install -r Codes/requirements.txt
  \end{lstlisting}
\item Models: snapshot tag \texttt{backup/3\_dim-models-20260121}.\\ Download binaries from GitHub Releases (Assets).
\item Set working directory for runtime scripts to \texttt{Codes/}:\\
  \begin{lstlisting}[language=bash,numbers=none]
cd Codes
  \end{lstlisting}
\end{enumerate}

\section{Setup \& Configuration}
\begin{enumerate}[leftmargin=1.2em]
  \item Flash firmware:\\
  {\scriptsize\texttt{Codes/Arduino/bleReadMultiple/bleReadMultiple.ino}} in Arduino IDE;\\
  select Feather nRF52; upload.
  \item Find BLE address: \texttt{python read\_raw\_ble/find\_device.py} (copy device MAC/UUID).
  \item Hardcode BLE address: edit the \texttt{address = "..."} line near the bottom of\\
  \texttt{read\_raw\_ble/read\_sensor.py}, \texttt{read\_raw\_ble/read\_sensor\_real.py}, and (if used)\\ \texttt{read\_raw\_ble/read\_sensor\_real\_classifier.py}.
  \item Calibration capture (run inside \texttt{Codes/}):\\
  \begin{lstlisting}[language=bash,numbers=none]
python read_raw_ble/read_sensor.py
  \end{lstlisting}
  Do a brief figure-8 motion away from metal surfaces; CSVs are saved under \texttt{datasets/}.
  \item Offsets/scales: place the latest files named \texttt{offset-*.npy} and \texttt{scale-*.npy} in \path{calibration_files/}. The scripts automatically load the newest files with those prefixes.
  \item Models: ensure \texttt{read\_raw\_ble/models/} holds the downloaded checkpoint set if you need pretrained classifiers.
\end{enumerate}

\section{Running the Artifact}
\subsection{Data capture}
\begin{lstlisting}[language=bash,numbers=none]
python read_raw_ble/read_sensor_real.py
\end{lstlisting}
Outputs timestamped CSVs under \texttt{datasets/}.

\subsection{Real-time classification}
\begin{lstlisting}[language=bash,numbers=none]
python read_raw_ble/read_sensor_real_classifier.py
\end{lstlisting}
Ensure the script uses the latest \texttt{offset-*}, \texttt{scale-*}, and model files.\\ Console prints detected gesture labels; logs are saved under \texttt{datasets/}.

\subsection{Expected outcomes}
\begin{itemize}[leftmargin=1.2em]
  \item Face-touching: $\approx$93\% accuracy (8 gestures) with 3\,s fine-tuning/user.
  \item Scratch detection: $\approx$95\% accuracy across 12 participants.
  \item Real-time loop maintains $>$30\,Hz inference on a laptop CPU.
\end{itemize}

\section{Reproducibility Checklist}
\begin{itemize}[leftmargin=*]
  \item \textbf{Hardware reproducible}: PCB sources + BOM (muTouch; files named \texttt{Magway.*} for compatibility) included.
  \item \textbf{Software reproducible}: All scripts + TS2Vec submodule; pinned deps in \texttt{Codes/requirements.txt}.
  \item \textbf{Data}: Calibration and small demo runs can be generated locally; full datasets are participant-specific and not included.
  \item \textbf{Pretrained models}: Provided via GitHub tag \texttt{backup/3\_dim-models-20260121}.
\end{itemize}

\section{Troubleshooting}
\begin{itemize}[leftmargin=*]
  \item BLE not found: retry \texttt{find\_device.py}; check power and pairing blocks; use BLE dongle.
  \item Drifting predictions: recalibrate sensors; ensure distance from large metal; re-run offset/scale.
  \item Import errors: confirm submodule init (\texttt{git submodule update --init --recursive}) and Python path from repo root.
\end{itemize}

\section{Notes on Prior Work}
The project builds on MagX (MobiCom'21) codebase for magnetic sensing; source: \href{https://github.com/dychen24/magx}{https://github.com/dychen24/magx}. This artifact extends it to self-touch sensing and includes updated PCB by Xiaomeng Chen.

\noindent\textbf{MagX citation (BibTeX).}
\begin{lstlisting}[language=bash,numbers=none]
@inproceedings{mag_x,
  author    = {Chen, Dongyao and Wang, Mingke and He, Chenxi and Luo, Qing
               and Iravantchi, Yasha and Sample, Alanson and Shin, Kang G.
               and Wang, Xinbing},
  title     = {MagX: Wearable, Untethered Hands Tracking with Passive Magnets},
  booktitle = {MobiCom '21},
  year      = {2021},
  pages     = {269--282},
  doi       = {10.1145/3447993.3483260}
}
\end{lstlisting}

\balance
\end{document}
